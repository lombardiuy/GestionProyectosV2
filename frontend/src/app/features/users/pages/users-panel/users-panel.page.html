

<div  class="w-100 h-100 d-flex flex-column align-items-center justify-content-center">
  <div class="card w-90 h-90">
    <div class="card-header w-100 h-8">
      <h5><i class="fa-solid fa-users"></i> Gesti√≥n de Usuarios </h5>
    </div>

    <div class="card-body d-flex flex-column w-100 h-92">

          <button *ngIf="hasPermission('USERS_CREATE')" class="btn btn-success position-absolute end-0 me-3"  (click)="createUser()" data-bs-toggle="modal" data-bs-target="#createUserModal">
          <i class="fa-solid fa-user-plus"></i> Crear Usuario
        </button>
                
            <users-list-component *ngIf="hasPermission('USERS_VIEW')" class="w-100 h-100"
              
                 [hasPermission]="hasPermission.bind(this)"
                 [profilePicturePath]="profilePicturePath" 
                 [userList]="usersList$ | async" 
                 [timestamp]="timestamp$ | async"

                 (editUserEvent)="editUser($event)" 
                 (suspendUserFromListEvent)="suspendUserFromList($event)" >
                   
            </users-list-component>
    </div>

   
  </div>



</div>

  <div class="modal fade" id="createUserModal" tabindex="-1" aria-hidden="true">
   <user-create-component     *ngIf="userCreateForm && hasPermission('USERS_CREATE')" class="w-100 h-100"
   
    [hasPermission]="hasPermission.bind(this)"
    [userCreateForm]="userCreateForm"
    [profilePicturePath]="profilePicturePath"
    [usersList]="usersList$ | async"
    [userRolesList]="userRolesList$ | async"
    [imagePreview] = "imagePreview"
    [formMessage] = "formMessage"
    [submitted] = "submitted"
 

    (setProfilePictureEvent)="setprofilePicture($event)"
    (saveUserEvent)="saveUser()"

    
     
   


   ></user-create-component>
  </div>


    <div class="modal fade" id="userPasswordResetModal" tabindex="-1" aria-hidden="true">
   <user-password-reset-component  #userPasswordResetComponent    *ngIf="userCreateForm && hasPermission('USERS_PASSWORD_RESET')" class="w-100 h-100"
       [hasPermission]="hasPermission.bind(this)"
      [username]="form['username'].value" 
      (resetPasswordEvent)="resetPassword()" 
   

></user-password-reset-component>




  </div>

  
    <div class="modal fade" id="userSuspensionModal" tabindex="-1" aria-hidden="true">
     <user-suspension-component  #userSuspensionComponent    *ngIf="userCreateForm && hasPermission('USERS_SUSPEND')" class="w-100 h-100"
     [hasPermission]="hasPermission.bind(this)"
      [username]="form['username'].value" 
      [origin]="origin" 
      [suspend] = "suspend"
      [formMessage] = "formMessage"
      (suspensionUserEvent)="suspensionUser()" 
      
   

></user-suspension-component>

</div>
